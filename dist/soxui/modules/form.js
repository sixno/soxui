(function(){"use strict";function e(){this.version="1.0.0";this.modules=[]}if(typeof soxui!="undefined"){soxui.form=new e}else{window.soxform=new e}})();layui.define("layer",function(e){"use strict";var b=layui.$,f=layui.layer,l=layui.hint(),v=layui.device(),C="form",h=".layui-form",w="layui-this",i="layui-show",$="layui-hide",T="layui-disabled",t=function(){this.config={verify:{required:[/[\S]+/,"必填项不能为空"],phone:[/^1\d{10}$/,"请输入正确的手机号"],email:[/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,"邮箱格式不正确"],url:[/(^#)|(^http(s*):\/\/[^\s]+\.[^\s]+)/,"链接格式不正确"],number:function(e){if(!e||isNaN(e))return"只能填写数字"},date:[/^(\d{4})[-\/](\d{1}|0\d{1}|1[0-2])([-\/](\d{1}|0\d{1}|[1-2][0-9]|3[0-1]))*$/,"日期格式不正确"],identity:[/(^\d{15}$)|(^\d{17}(x|X|\d)$)/,"请输入正确的身份证号"]}}};t.prototype.set=function(e){var i=this;b.extend(true,i.config,e);return i};t.prototype.verify=function(e){var i=this;b.extend(true,i.config.verify,e);return i};t.prototype.on=function(e,i){return layui.onevent.call(this,C,e,i)};t.prototype.val=function(e,t){var i=this,a=b(h+'[lay-filter="'+e+'"]');a.each(function(e,i){var n=b(this);layui.each(t,function(e,i){var t=n.find('[name="'+e+'"]'),a;if(!t[0])return;a=t[0].type;if(a==="checkbox"){t[0].checked=i}else if(a==="radio"){t.each(function(){if(this.value===i){this.checked=true}})}else{t.val(i)}})});o.render(null,e)};t.prototype.render=function(e,i){var t=this,a=b(h+function(){return i?'[lay-filter="'+i+'"]':""}()),n={select:function(){var d="请选择",y="layui-form-select",p="layui-select-title",m="layui-select-none",k="",x,e=a.find("select"),g=function(e,i){if(!b(e.target).parent().hasClass(p)||i){b("."+y).removeClass(y+"ed "+y+"up");x&&k&&x.val(k)}x=null},f=function(a,e,i){var n=b(this),t=a.find("."+p),l=t.find("input"),s=a.find("dl"),r=s.children("dd"),o=this.selectedIndex,u;if(e)return;var c=function(){var e=a.offset().top+a.outerHeight()+5-j.scrollTop(),i=s.outerHeight();o=n[0].selectedIndex;a.addClass(y+"ed");r.removeClass($);u=null;r.eq(o).addClass(w).siblings().removeClass(w);if(e+i>j.height()&&e>=i){a.addClass(y+"up")}f()},d=function(e){a.removeClass(y+"ed "+y+"up");l.blur();u=null;if(e)return;v(l.val(),function(e){var i=n[0].selectedIndex;if(e){k=b(n[0].options[i]).html();if(i===0&&k===l.attr("placeholder")){k=""}l.val(k||"")}})},f=function(){var e=s.children("dd."+w);if(!e[0])return;var i=e.position().top,t=s.height(),a=e.height();if(i>t){s.scrollTop(i+s.scrollTop()-t+a-5)}if(i<0){s.scrollTop(i+s.scrollTop()-5)}};t.on("click",function(e){a.hasClass(y+"ed")?d():(g(e,true),c());s.find("."+m).remove()});t.find(".layui-edge").on("click",function(){l.focus()});l.on("keyup",function(e){var i=e.keyCode;if(i===9){c()}}).on("keydown",function(l){var e=l.keyCode;if(e===9){d()}var r=function(a,n){var e,i;l.preventDefault();var t=function(){var e=s.children("dd."+w);if(s.children("dd."+$)[0]&&a==="next"){var i=s.children("dd:not(."+$+",."+T+")"),t=i.eq(0).index();if(t>=0&&t<e.index()&&!i.hasClass(w)){return i.eq(0).prev()[0]?i.eq(0).prev():s.children(":last")}}if(n&&n[0]){return n}if(u&&u[0]){return u}return e}();i=t[a]();e=t[a]("dd:not(."+$+")");if(!i[0])return u=null;u=t[a]();if((!e[0]||e.hasClass(T))&&u[0]){return r(a,u)}e.addClass(w).siblings().removeClass(w);f()};if(e===38)r("prev");if(e===40)r("next");if(e===13){l.preventDefault();s.children("dd."+w).trigger("click")}});var v=function(a,e,n){var l=0;layui.each(r,function(){var e=b(this),i=e.text(),t=i.indexOf(a)===-1;if(a===""||n==="blur"?a!==i:t)l++;n==="keyup"&&e[t?"addClass":"removeClass"]($)});var i=l===r.length;return e(i),i};var h=function(e){var i=this.value,t=e.keyCode;if(t===9||t===13||t===37||t===38||t===39||t===40){return false}v(i,function(e){if(e){s.find("."+m)[0]||s.append('<p class="'+m+'">无匹配项</p>')}else{s.find("."+m).remove()}},"keyup");if(i===""){s.find("."+m).remove()}f()};if(i){l.on("keyup",h).on("blur",function(e){var i=n[0].selectedIndex;x=l;k=b(n[0].options[i]).html();if(i===0&&k===l.attr("placeholder")){k=""}setTimeout(function(){v(l.val(),function(e){k||l.val("")},"blur")},200)})}r.on("click",function(){var e=b(this),i=e.attr("lay-value");var t=n.attr("lay-filter");if(e.hasClass(T))return false;if(e.hasClass("layui-select-tips")){l.val("")}else{l.val(e.text());e.addClass(w)}e.siblings().removeClass(w);n.val(i).removeClass("layui-form-danger");layui.event.call(this,C,"select("+t+")",{elem:n[0],value:i,othis:a});d(true);return false});a.find("dl>dt").on("click",function(e){return false});b(document).off("click",g).on("click",g)};e.each(function(e,i){var t=b(this),a=t.next("."+y),n=this.disabled,l=i.value,r=b(i.options[i.selectedIndex]),s=i.options[0];if(typeof t.attr("lay-ignore")==="string")return t.show();var o=typeof t.attr("lay-search")==="string",u=s?s.value?d:s.innerHTML||d:d;var c=b(['<div class="'+(o?"":"layui-unselect ")+y,(n?" layui-select-disabled":"")+'">','<div class="'+p+'">','<input type="text" placeholder="'+u+'" '+('value="'+(l?r.html():"")+'"')+(o?"":" readonly")+' class="layui-input'+(o?"":" layui-unselect")+(n?" "+T:"")+'">','<i class="layui-edge"></i></div>','<dl class="layui-anim layui-anim-upbit'+(t.find("optgroup")[0]?" layui-select-group":"")+'">',function(e){var t=[];layui.each(e,function(e,i){if(e===0&&!i.value){t.push('<dd lay-value="" class="layui-select-tips">'+(i.innerHTML||d)+"</dd>")}else if(i.tagName.toLowerCase()==="optgroup"){t.push("<dt>"+i.label+"</dt>")}else{t.push('<dd lay-value="'+i.value+'" class="'+(l===i.value?w:"")+(i.disabled?" "+T:"")+'">'+i.innerHTML+"</dd>")}});t.length===0&&t.push('<dd lay-value="" class="'+T+'">没有选项</dd>');return t.join("")}(t.find("*"))+"</dl>","</div>"].join(""));a[0]&&a.remove();t.after(c);f.call(this,c,n,o)})},checkbox:function(){var u={checkbox:["layui-form-checkbox","layui-form-checked","checkbox"],_switch:["layui-form-switch","layui-form-onswitch","switch"]},e=a.find("input[type=checkbox]"),c=function(t,a){var n=b(this);t.on("click",function(){var e=n.attr("lay-filter"),i=(n.attr("lay-text")||"").split("|");if(n[0].disabled)return;n[0].checked?(n[0].checked=false,t.removeClass(a[1]).find("em").text(i[1])):(n[0].checked=true,t.addClass(a[1]).find("em").text(i[0]));layui.event.call(n[0],C,a[2]+"("+e+")",{elem:n[0],value:n[0].value,othis:t})})};e.each(function(e,t){var i=b(this),a=i.attr("lay-skin"),n=(i.attr("lay-text")||"").split("|"),l=this.disabled;if(a==="switch")a="_"+a;var r=u[a]||u.checkbox;if(typeof i.attr("lay-ignore")==="string")return i.show();var s=i.next("."+r[0]),o=b(['<div class="layui-unselect '+r[0],t.checked?" "+r[1]:"",l?" layui-checkbox-disbaled "+T:"",'"',a?' lay-skin="'+a+'"':"",">",function(){var e=t.title.replace(/\s/g,""),i={checkbox:[e?"<span>"+t.title+"</span>":"",'<i class="layui-icon layui-icon-ok"></i>'].join(""),_switch:"<em>"+((t.checked?n[0]:n[1])||"")+"</em><i></i>"};return i[a]||i["checkbox"]}(),"</div>"].join(""));s[0]&&s.remove();i.after(o);c.call(this,o,r)})},radio:function(){var s="layui-form-radio",o=["&#xe643;","&#xe63f;"],e=a.find("input[type=radio]"),r=function(n){var l=b(this),r="layui-anim-scaleSpring";n.on("click",function(){var e=l[0].name,i=l.parents(h);var t=l.attr("lay-filter");var a=i.find("input[name="+e.replace(/(\.|#|\[|\])/g,"\\$1")+"]");if(l[0].disabled)return;layui.each(a,function(){var e=b(this).next("."+s);this.checked=false;e.removeClass(s+"ed");e.find(".layui-icon").removeClass(r).html(o[1])});l[0].checked=true;n.addClass(s+"ed");n.find(".layui-icon").addClass(r).html(o[0]);layui.event.call(l[0],C,"radio("+t+")",{elem:l[0],value:l[0].value,othis:n})})};e.each(function(e,i){var t=b(this),a=t.next("."+s),n=this.disabled;if(typeof t.attr("lay-ignore")==="string")return t.show();a[0]&&a.remove();var l=b(['<div class="layui-unselect '+s,i.checked?" "+s+"ed":"",(n?" layui-radio-disbaled "+T:"")+'">','<i class="layui-anim layui-icon">'+o[i.checked?0:1]+"</i>","<div>"+function(){var e=i.title||"";if(typeof t.next().attr("lay-radio")==="string"){e=t.next().html();t.next().remove()}return e}()+"</div>","</div>"].join(""));t.after(l);r.call(this,l)})}};e?n[e]?n[e]():l.error("不支持的"+e+"表单渲染"):layui.each(n,function(e,i){i()});return t};var a=function(){var e=b(this),u=o.config.verify,c=null,d="layui-form-danger",a={},i=e.parents(h),t=i.find("*[lay-verify]"),n=e.parents("form")[0],l=i.find("input,select,textarea"),r=e.attr("lay-filter");layui.each(t,function(e,l){var r=b(this),i=r.attr("lay-verify").split("|"),s=r.attr("lay-verType"),o=r.val();r.removeClass(d);layui.each(i,function(e,i){var t,a="",n=typeof u[i]==="function";if(u[i]){var t=n?a=u[i](o,l):!u[i][0].test(o);a=a||u[i][1];if(t){if(s==="tips"){f.tips(a,function(){if(typeof r.attr("lay-ignore")!=="string"){if(l.tagName.toLowerCase()==="select"||/^checkbox|radio$/.test(l.type)){return r.next()}}return r}(),{tips:1})}else if(s==="alert"){f.alert(a,{title:"提示",shadeClose:true})}else{f.msg(a,{icon:5,shift:6})}if(!v.android&&!v.ios)l.focus();r.addClass(d);return c=true}}});if(c)return c});if(c)return false;var s={};layui.each(l,function(e,i){i.name=(i.name||"").replace(/^\s*|\s*&/,"");if(!i.name)return;if(/^.*\[\]$/.test(i.name)){var t=i.name.match(/^(.*)\[\]$/g)[0];s[t]=s[t]|0;i.name=i.name.replace(/^(.*)\[\]$/,"$1["+s[t]+++"]")}if(/^checkbox|radio$/.test(i.type)&&!i.checked)return;a[i.name]=i.value});return layui.event.call(this,C,"submit("+r+")",{elem:this,form:n,field:a})};var o=new t,n=b(document),j=b(window);o.render();n.on("reset",h,function(){var e=b(this).attr("lay-filter");setTimeout(function(){o.render(null,e)},50)});n.on("submit",h,a).on("click","*[lay-submit]",a);e(C,o)});